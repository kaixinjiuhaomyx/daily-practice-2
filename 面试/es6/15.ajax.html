<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <!-- 无需重新加载整个网页的情况下，能够更新部分网页的技术 -->
    <button id="btn">btn</button>
    <div id="div1"></div>
    <script src="../../jq/jquery-1.12.4.js"></script>
    <script>
        
        // 创建xmlhttp对象
        // 向服务器发送请求
        // 服务器响应
        
        // 原生语法
            // // 1 创建 XMLHttpRequest 对象
            // var oBtn = document.getElementById("btn");
            // oBtn.onclick = function (){
            //     var xmlhttp;
            //     if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
            //         xmlhttp = new XMLHttpRequest();
            //     } else { // code for IE6, IE5
            //         xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
            //     }
            //     // 2.发送请求
            //     xmlhttp.open("GET", "a.json", true); //请求方式 地址 是否异步
            //     xmlhttp.send();


            //     // xmlhttp.open("POST","ajax_test.asp",true);
            //     // xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
            //     // xmlhttp.send("fname=Bill&lname=Gates");

// 1 创建 XMLHttpRequest 对象
var xmlhttp;
if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
} else { // code for IE6, IE5
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
}
// 2.发送请求
xmlhttp.open("GET", "http://127.0.0.1/meituan/welcome/product?id=2", true);
xmlhttp.send();

//3.服务器响应  每当 readyState 改变时，就会触发 onreadystatechange 事件。
xmlhttp.onreadystatechange = function () {
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        var oDiv = document.getElementById('div1');
        oDiv.innerHTML = xmlhttp.responseText
        // console.log(xmlhttp.responseText);
    }
}
    

            //     //3.服务器响应  每当 readyState 改变时，就会触发 onreadystatechange 事件。
            //     xmlhttp.onreadystatechange = function () {
            //         if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            //             // var oDiv = document.getElementById('div1');
            //             // oDiv.innerHTML = xmlhttp.responseText
            //             console.log(JSON.parse(xmlhttp.responseText).a);
            //             // JSON.stringify
            //         }
            //     }
            // }

        // jq写法 vue中是axios
        $('#btn').click(function(){
            $.get('a.json',function(data){
                $("#div1").html(data.a);
            },'json'); //get：请求方式； 地址 参数 回调函数 返回数据类型（格式json就不用转化）
        });
 
    </script>
    <!-- 
        XMLHttpRequest 的状态
        从 0 到 4 发生变化。

            0: 请求未初始化
            1: 服务器连接已建立
            2: 请求已接收
            3: 请求处理中
            4: 请求已完成，且响应已就绪

        status
            200  (“OK”)  成功 一切正常
            500  服务器方面的问题
            503 （服务不可用）
            404  找不到资源
            301  永久重定向
            302  临时重定向
            304  缓存
    -->
    <!-- 
        JOSN.parse();将对象解构的字符串转化为真正的对象
        JOSN.stringify();将对象转化为字符串
     -->
     <!-- 
         跨域
         域名、协议、端口
      -->
</body>
</html>